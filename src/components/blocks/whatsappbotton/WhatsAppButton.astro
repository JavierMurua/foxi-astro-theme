---
export interface Props {
  phone: string;
  message?: string;
  size?: number;
  bottom?: string;
  right?: string;
  left?: string;
  top?: string;
}

// Valores por defecto
const {
  phone = "1234567890",
  message = "¡Hola! Estoy interesado en más información.",
  size = 50,
  bottom = "20px",
  right = "20px",
  left = "20px",
  top = "auto"
} = Astro.props;

const encodedMessage = encodeURIComponent(message);

// URL de WhatsApp para móvil y escritorio
const whatsappMobileUrl = `https://wa.me/${phone}?text=${encodedMessage}`;
const whatsappDesktopUrl = `https://web.whatsapp.com/send?phone=${phone}&text=${encodedMessage}`;
---
<!-- Botón para móvil (Se muestra solo en pantallas menores a 768px) -->
<a 
  href={whatsappMobileUrl} 
  target="_blank" 
  class="whatsapp-button whatsapp-mobile"
  aria-label="Chatear por WhatsApp"
  style={`bottom: ${bottom}; right: ${right}; width: ${size}px; height: ${size}px; font-size: ${size * 0.6}px;`}
>
  <i class="fa-brands fa-whatsapp"></i>
</a>

<!-- Botón para escritorio (Se muestra solo en pantallas mayores a 768px) -->
<a 
  href={whatsappDesktopUrl} 
  target="_blank" 
  class="whatsapp-button whatsapp-desktop"
  aria-label="Chatear por WhatsApp"
  style={`bottom: ${bottom}; left: ${left}; width: ${size}px; height: ${size}px; font-size: ${size * 0.6}px;`}
>
  <i class="fa-brands fa-whatsapp"></i>
</a>

<style>
  .whatsapp-button {
    position: fixed;
    background-color: #25D366;
    z-index: 1000;
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
    text-decoration: none;
    transition: background 0.3s ease;
  }

  .whatsapp-button:hover {
    background-color: #128C7E;
  }

  /* Por defecto, ocultamos ambos botones */
  .whatsapp-mobile, .whatsapp-desktop {
    display: none;
  }

  /* Mostrar el botón móvil en pantallas menores a 768px */
  @media (max-width: 768px) {
    .whatsapp-mobile {
      display: flex;
    }
  }

  /* Mostrar el botón de escritorio en pantallas mayores a 768px */
  @media (min-width: 769px) {
    .whatsapp-desktop {
      display: flex;
    }
  }
</style>
